(this["webpackJsonpmp-5_api_kinopoisk_react_version"]=this["webpackJsonpmp-5_api_kinopoisk_react_version"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),s=n(4),c=n.n(s),i=n(1),o=n.n(i),l=n(2),u=n(5),d=n(7);var p=function(){var e;return e={API__get__ID:"https://kinopoiskapiunofficial.tech/api/v2.2/films/",API__get__ID__PREV:"https://kinopoiskapiunofficial.tech/api/v2.1/films/",API_key:"e63e194e-0c87-473e-ad3d-900519512636",API_base__url:"https://kinopoiskapiunofficial.tech/api/v2.1/films/releases?year=2018&month=OCTOBER&page=1",API__get__actor:"https://kinopoiskapiunofficial.tech/api/v1/staff?filmId=",API_get_KeyWord:"https://kinopoiskapiunofficial.tech/api/v2.1/films/search-by-keyword?",API__get__rev:"https://kinopoiskapiunofficial.tech/api/v1/reviews?filmId=",API__get__actorURl:"https://kinopoiskapiunofficial.tech/api/v1/staff/"},Object(d.a)(e,"API_get_KeyWord","https://kinopoiskapiunofficial.tech/api/v2.1/films/search-by-keyword?keyword="),Object(d.a)(e,"API__get__USER__FILM","https://kinopoiskapiunofficial.tech/api/v2.1/films/releases?"),e}();function _(e){return f.apply(this,arguments)}function f(){return(f=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=fetch(t,{headers:{"Content-type":"application/json","X-API-KEY":p.API_key}}).then((function(e){return 404===e.status?0:e.json()})).then((function(e){return e})),e.next=3,n;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(){return{rating:function(e){return(e=+e)>6.9?"rev-green":e<6.9&&e>4?"rev-yellow":e<4&&e>.1?"rev-red":"rev-Nan"}}},m=n(0),h=j();var b=function(e){var t=e.el,n=e.func;return Object(m.jsxs)("div",{className:"movie__block",children:[Object(m.jsxs)("div",{className:"block-movie__prev",children:[Object(m.jsx)("img",{className:"block-movie__img",src:t.posterUrl,id:t.filmId,onClick:function(e){n(e)}}),Object(m.jsx)("div",{className:"block-movie__genres",children:t.genres||0!==t.genres.length?t.genres[0].genre:"\u0416\u0430\u0431\u0430\u0433\u0430\u0434\u044e\u0448\u043d\u0438\u043a"}),Object(m.jsx)("div",{className:h.rating(t.rating)+" block-movie__rev",children:Object(m.jsx)("p",{children:"number"===typeof+t.rating&&t.rating?(+t.rating).toFixed(1):"N"})})]}),Object(m.jsx)("div",{className:"block-movie__info",children:Object(m.jsx)("div",{className:"block-movie__author",children:t.nameRu||t.nameEn})})]})};var v=function(){var e={reviewRender:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(p.API__get__rev+t+"&page=1");case 2:if(0===!(n=e.sent)||n.reviews||0===!n.reviews.length){e.next=5;break}return e.abrupt("return","\u041f\u043e \u0444\u0438\u043b\u044c\u043c\u0443 \u043d\u0435\u0442 \u043e\u0442\u0437\u044b\u0432\u043e\u0432");case 5:for(r=[],a=0;a<12||a<n.reviews.length;a++)s=n.reviews[a],r.push(Object(m.jsxs)("div",{className:"rec",children:[Object(m.jsx)("span",{className:"rev__title",children:s.reviewTitle||"\u0440\u0435\u0446\u0435\u043d\u0437\u0438\u044f "+(+a+1)}),Object(m.jsx)("p",{children:s.reviewDescription}),Object(m.jsx)("span",{className:"rev__autor",children:s.reviewAutor||"\u041d\u0435\u0442 \u0430\u0432\u0442\u043e\u0440\u0430"})]}));return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),actorRender:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(p.API__get__actor+t);case 2:for(n=e.sent,r=[],a=function(e){var t=n[e].professionText;t=t.slice(0,t.length-1),console.log(n),r.push(Object(m.jsxs)("div",{className:"actor__block",children:[Object(m.jsx)("div",{className:"actor__image",onClick:Object(l.a)(o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(p.API__get__actorURl+n[e].staffId);case 2:r=t.sent,window.open(r.webUrl);case 4:case"end":return t.stop()}}),t)}))),children:Object(m.jsx)("img",{src:n[e].posterUrl,alt:"",className:"actor__imageImg",id:"G"+n[e].staffId})}),Object(m.jsx)("div",{className:"actor__name",children:n[e].nameRu}),Object(m.jsx)("div",{className:"actor__job",children:t})]}))},s=0;s<10||s>=n.length-1;s++)a(s);return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),imageRender:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(p.API__get__ID__PREV+t+"/frames");case 2:if(n=e.sent,console.log(n,n.frames.length),n&&n.frames.length){e.next=6;break}return e.abrupt("return",'"\u041f\u043e \u0444\u0438\u043b\u044c\u043c\u0443 \u043d\u0435\u0442 \u043a\u0430\u0434\u0440\u043e\u0432"');case 6:r=[],a=0;case 8:if(!(a<10||a>=n.frames.length-1)){e.next=15;break}if(n.frames[a]){e.next=11;break}return e.abrupt("break",15);case 11:r.push(Object(m.jsx)("div",{className:"des__movie-images",children:Object(m.jsx)("img",{src:n.frames[a].image,alt:""})}));case 12:a++,e.next=8;break;case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),factsRender:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r,a,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(p.API__get__ID+t+"/facts");case 2:if(n=e.sent,r=[],n||n.total){e.next=6;break}return e.abrupt("return","\u041f\u043e \u0444\u0438\u043b\u044c\u043c\u0443 \u043d\u0435\u0442 \u0444\u0430\u043a\u0442\u043e\u0432");case 6:for(a=0;a<4||a===n.total;a++)s=Math.floor(Math.random()*n.total),c=(!0===n.items[s].spoiler?Object(m.jsx)("span",{className:"spoiler",children:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u0441\u043f\u043e\u0439\u043b\u0435\u0440"}):"")+n.items[s].text,r.push(Object(m.jsx)("li",{className:"des-facts__li",onClick:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.open(_()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),dangerouslySetInnerHTML:{__html:c}}));return e.abrupt("return",Object(m.jsx)("ul",{className:"des-facts__ul",children:r}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),dataMediaIfList:function(e,t,n){return e<760?Object(m.jsx)("li",{id:"event"+n,className:"des-page__block",onClick:function(){return t(n)},children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}):""},dataMediaIfTopBlock:function(e){return console.log(e),e<760?Object(m.jsx)("div",{className:"des__description des-top__block"}):""},kl1:function(e){var t=e.map((function(e){return e.genre})).join(", ");return t.length?t:"\u0416\u0430\u0431\u0430\u0433\u0430\u0434\u044e\u0448\u043d\u0438\u043a"},le:function(e){return console.log(e),e?(e.length>240&&(e=e.slice(0,240),e+="..."),e):"\u041d\u0435\u0442 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f"},kl2:function(e){return e.length&&e?e.map((function(e){return e.country})).join(", "):"\u0416\u0430\u0431\u0430\u0433\u0430\u0434\u044e\u0448\u043d\u0438\u043a"},mnts:function(e){if((e=Math.floor(e))<60)return"".concat(e," \u041c\u0438\u043d\u0443\u0442");if(e>=60){for(var t=0;e>60;t++)e-=60;return" ".concat(t+" \u0427\u0430\u0441"+(1===t?"":"\u0430")," \u0438 ").concat(e," \u041c\u0438\u043d\u0443\u0442")}return"666 \u043c\u0438\u043d\u0443\u0442"}};return e}();function x(){return x=Object(l.a)(o.a.mark((function e(t,n){var r,a,s,i,d,f,j,h,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b=function(){return(b=Object(l.a)(o.a.mark((function e(n){var r,a,s,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=document.querySelectorAll(".des-top__block"),a=document.querySelectorAll(".des-page__block"),e.t0=n,e.next=0===e.t0?5:1===e.t0?7:2===e.t0?12:3===e.t0?17:4===e.t0?22:5===e.t0?27:29;break;case 5:return j[0]||(j[0]=Object(m.jsxs)("ul",{className:"des__ul",children:[Object(m.jsxs)("li",{children:["\u0413\u043e\u0434 \u0432\u044b\u0445\u043e\u0434\u0430: ",i.year]}),Object(m.jsxs)("li",{children:["\u0421\u0442\u0440\u0430\u043d\u044b: ",v.kl2(i.countries)]}),Object(m.jsxs)("li",{children:["\u0420\u0435\u0439\u0442\u0438\u043d\u0433: (",(i.ratingKinopoisk||"N")+" KINOPOISK), ("+(i.ratingImdb||"N")+"IMDB",")"]}),Object(m.jsxs)("li",{children:[" \u0421\u043b\u043e\u0433\u0430\u043d: ",i.slogan||"\u041d\u0435\u0442 \u0441\u043b\u043e\u0433\u0430\u043d\u0430"]}),Object(m.jsxs)("li",{children:["\u041f\u0440\u043e\u043a\u0430\u0442 \u043f\u043e \u043c\u0438\u0440\u0443: ","object"==typeof d.items[0]?String(d.items[0].amount).split("").join(" ")+"$":"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"]}),Object(m.jsxs)("li",{children:["\u0414\u043b\u0438\u043d\u0430 \u0444\u0438\u043b\u044c\u043c\u0430: ",v.mnts(i.filmLength)]})]})),e.abrupt("break",29);case 7:if(j[1]){e.next=11;break}return e.next=10,v.actorRender(t.target.id);case 10:j[1]=e.sent;case 11:return e.abrupt("break",29);case 12:if(j[2]){e.next=16;break}return e.next=15,v.factsRender(t.target.id);case 15:j[2]=e.sent;case 16:return e.abrupt("break",29);case 17:if(j[3]){e.next=21;break}return e.next=20,v.reviewRender(t.target.id);case 20:j[3]=e.sent;case 21:return e.abrupt("break",29);case 22:if(j[4]){e.next=26;break}return e.next=25,v.imageRender(t.target.id);case 25:j[4]=e.sent;case 26:return e.abrupt("break",29);case 27:return j[5]||(j[5]=v.le(i.description)),e.abrupt("break",29);case 29:for(c.a.render(j[n],r[n]),s=function(e){var t=r[e];e!==n?(a[e].style.textDecoration="none",t.style.width="0%",setTimeout((function(){t.style.display="none"}),500)):(a[e].style.textDecoration="underline",t.style.width="100%",t.style.display="flex")},l=0;l<r.length;l++)s(l);case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)},h=function(e){return b.apply(this,arguments)},r=Object(u.a)(n,2),a=r[0],s=r[1],e.next=5,_(p.API__get__ID+t.target.id);case 5:return i=e.sent,e.next=8,_(p.API__get__ID+t.target.id+"/box_office");case 8:return d=e.sent,f=0,j=[],e.abrupt("return",Object(m.jsxs)("div",{className:"des",children:[window.screen.width>760?Object(m.jsx)("div",{className:"des__left",children:Object(m.jsx)("img",{className:"des__image",src:i.posterUrl})}):"",Object(m.jsxs)("div",{className:"des__right",children:[Object(m.jsxs)("div",{className:"des__titles",children:[Object(m.jsx)("div",{className:"des__title",children:i.nameRu||i.nameEn||"\u041a\u043b\u0430\u043b\u0430\u0444\u0443\u0434\u0430 \u041a\u043b\u0430\u043b\u0430\u0444\u0443"}),Object(m.jsx)("div",{className:"des__genres",children:v.kl1(i.genres)}),Object(m.jsx)("div",{className:"des__text",children:window.screen.width>760?v.le(i.description):""}),Object(m.jsxs)("ul",{className:"des__pages",children:[Object(m.jsx)("li",{id:"event"+f++,className:"des-page__block",onClick:function(){return h(0)},children:"\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438"}),Object(m.jsx)("li",{id:"event"+f++,className:"des-page__block",onClick:function(){return h(1)},children:"\u0410\u043a\u0442\u0435\u0440\u044b"}),Object(m.jsx)("li",{id:"event"+f++,className:"des-page__block",onClick:function(){return h(2)},children:"\u0424\u0430\u043a\u0442\u044b"}),Object(m.jsx)("li",{id:"event"+f++,className:"des-page__block",onClick:function(){return h(3)},children:"\u041e\u0442\u0437\u044b\u0432\u044b"}),Object(m.jsx)("li",{id:"event"+f++,className:"des-page__block",onClick:function(){return h(4)},children:"\u041a\u0430\u0434\u0440\u044b"}),v.dataMediaIfList(window.screen.width,h,5)]}),Object(m.jsxs)("div",{className:"des__top",children:[Object(m.jsx)("div",{className:"des-top__block",id:"page"+(f++-6),children:Object(m.jsxs)("ul",{className:"des__ul",children:[Object(m.jsxs)("li",{children:["\u0413\u043e\u0434 \u0432\u044b\u0445\u043e\u0434\u0430: ",i.year]}),Object(m.jsxs)("li",{children:["\u0421\u0442\u0440\u0430\u043d\u044b: ",v.kl2(i.countries)]}),Object(m.jsxs)("li",{children:["\u0420\u0435\u0439\u0442\u0438\u043d\u0433: (",(i.ratingKinopoisk||"N")+" KINOPOISK), ("+(i.ratingImdb||"N")+"IMDB",")"]}),Object(m.jsxs)("li",{children:[" \u0421\u043b\u043e\u0433\u0430\u043d: ",i.slogan||"\u041d\u0435\u0442 \u0441\u043b\u043e\u0433\u0430\u043d\u0430"]}),Object(m.jsxs)("li",{children:["\u041f\u0440\u043e\u043a\u0430\u0442 \u043f\u043e \u043c\u0438\u0440\u0443: ","object"==typeof d.items[0]?String(d.items[0].amount).split("").join(" ")+"$":"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"]}),Object(m.jsxs)("li",{children:["\u0414\u043b\u0438\u043d\u0430 \u0444\u0438\u043b\u044c\u043c\u0430: ",v.mnts(i.filmLength)]})]})}),Object(m.jsx)("div",{className:"des__actors des-top__block",id:"page"+(f++-6)}),Object(m.jsx)("div",{className:"des__facts des-top__block",id:"page"+(f++-6)}),Object(m.jsx)("div",{className:"des__rev des-top__block",id:"page"+(f++-6)}),Object(m.jsx)("div",{className:"des__imgs des-top__block",id:"page"+(f++-6)}),v.dataMediaIfTopBlock(window.screen.width)]})]}),Object(m.jsx)("a",{href:i.webUrl||" https://www.kinopoisk.ru/",children:Object(m.jsxs)("div",{className:"search__kinopoisk",children:["\u0418\u0441\u043a\u0430\u0442\u044c \u043d\u0430 ",Object(m.jsx)("br",{})," \u043a\u0438\u043d\u043e\u043f\u043e\u0438\u0441\u043a\u0435"]})}),console.log(navigator.connection.downlink)]}),Object(m.jsx)("div",{className:"des__cross",onClick:function(){console.log(s),a(s)},children:Object(m.jsx)("i",{className:"fa fa-times",id:"h4","aria-hidden":"true"})})]}));case 12:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}var O=function(e,t){return x.apply(this,arguments)},g=(n(14),1),k="https://kinopoiskapiunofficial.tech/api/v2.1/films/releases?year=2022&month=NOVEMBER&page=",N=["January","February","March","April","May","June","July","August","September","October","November","December"],y=function(){var e=Object(r.useState)("https://kinopoiskapiunofficial.tech/api/v2.1/films/releases?year=2021&month=NOVEMBER&page=1"),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(!1),i=Object(u.a)(s,2),d=i[0],f=i[1],j=Object(r.useState)("NOVEMBER"),h=Object(u.a)(j,2),v=h[0],x=h[1];function y(e){a(k+e)}function w(e){return I.apply(this,arguments)}function I(){return(I=Object(l.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,_(t);case 3:n=e.sent,r=[],n.hasOwnProperty("releases")&&(n.films=n.releases),console.log(n),n.films.forEach((function(e,t){r[t]=Object(m.jsx)(b,{el:e,func:A},t)})),c.a.render(r,document.getElementById("movieBlockCont"));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return P.apply(this,arguments)}function P(){return(P=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,[E,k+g]);case 2:n=e.sent,c.a.render(n,document.getElementById("movieBlockCont"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){w(n)}return Object(r.useEffect)(Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(n);case 1:case"end":return e.stop()}}),e)}))),[n]),Object(r.useEffect)((function(){var e=0,t=document.getElementById("mouths__cont2");e=d?190:0,t.style.width=e+20+"px",t.style.height=e+50+"px",d&&setTimeout((function(){for(var e=[],t=function(t){var n=N[t];e.push(Object(m.jsx)("div",{className:"mouth",onClick:function(){x(n),f((function(e){return!e}))},children:N[t].split("")[0]}))},n=0;n<N.length;n++)t(n);c.a.render(e,document.getElementById("mouths"))}),1e3)}),[d]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{className:"page__header header",children:Object(m.jsx)("div",{className:"header__container _container",children:Object(m.jsxs)("nav",{className:"nav",children:[Object(m.jsx)("div",{className:"logo",onClick:function(){a("https://kinopoiskapiunofficial.tech/api/v2.1/films/releases?year=2021&month=NOVEMBER&page=1"),g=1,k="https://kinopoiskapiunofficial.tech/api/v2.1/films/releases?year=2021&month=NOVEMBER&page="},children:"CinemaCerv"}),Object(m.jsxs)("div",{className:"mouths__cont",children:["\u041d\u0430\u0439\u0442\u0438 \u0444\u0438\u043b\u044c\u043c\u044b \u043f\u043e \u043c\u0435\u0441\u044f\u0446\u0443 \u0438 \u0433\u043e\u0434\u0443 ",Object(m.jsx)("i",{className:"fa fa-long-arrow-right","aria-hidden":"true"}),Object(m.jsxs)("div",{className:"mount__cont2",id:"mouths__cont2",children:[Object(m.jsx)("div",{className:"mouths",onClick:function(){f((function(e){return!e}))},id:"mouths"}),Object(m.jsx)("form",{action:"#",className:"form__mounth",onSubmit:function(e){e.preventDefault(),f((function(e){return!e})),g=1;var t=document.querySelector("#input2");(t.value<2014||t.value>2021)&&(t.value=2015),k=p.API__get__USER__FILM+"year=".concat(t.value,"&month=").concat(v,"&page="),a(p.API__get__USER__FILM+"year=".concat(t.value,"&month=").concat(v,"&page=")+g)},children:Object(m.jsx)("input",{type:"text",placeholder:"\u0421\u044e\u0434\u0430 \u0433\u043e\u0434",className:"search__mounth",id:"input2"})})]})]}),Object(m.jsx)("form",{action:"#",className:"form1",onSubmit:function(e){e.preventDefault(),1!==g&&(g=1);var t=document.querySelector("#input1");return k=p.API_get_KeyWord+String(t.value)+"&page=",function(e,t){a(e+t)}(p.API_get_KeyWord+String(t.value)+"&page=",g),!1},id:"form1",children:Object(m.jsx)("input",{type:"text",placeholder:"\u041d\u0430\u0439\u0442\u0438 \u0432\u0430\u0448 \u043b\u044e\u0431\u0438\u043c\u044b\u0439 \u0444\u0438\u043b\u044c\u043c",className:"search",id:"input1"})})]})})}),Object(m.jsx)("main",{className:"main",children:Object(m.jsxs)("div",{className:"main__container _container",children:[Object(m.jsx)("div",{className:"movie__block-cont",id:"movieBlockCont"}),Object(m.jsxs)("div",{className:"btns__mov",children:[Object(m.jsx)("button",{className:"button__mov",id:"btn-prev__mov",children:Object(m.jsx)("i",{className:"fa fa-chevron-left","aria-hidden":"true",onClick:function(){return 1!==g?y(--g):""}})}),Object(m.jsx)("button",{className:"button__mov",id:"btn-next__mov",children:Object(m.jsx)("i",{className:"fa fa-chevron-right","aria-hidden":"true",onClick:function(){return y(++g)}})})]})]})}),Object(m.jsx)("footer",{className:"footer",children:Object(m.jsx)("div",{className:"footer__container _container",children:Object(m.jsxs)("div",{className:"footer__text",children:["\u0421\u0430\u0439\u0442 \u0431\u044b\u043b \u0441\u043e\u0437\u0434\u0430\u043d ",Object(m.jsx)("a",{href:"https://t.me/CookBookAnarchyst",children:"\u0418\u043d\u0434\u0443\u0441\u043e\u043c"})," \u0432 \u043f\u043e\u0434\u0432\u0430\u043b\u0435"]})})})]})},w=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(y,{})})};c.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(w,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.e745d2f0.chunk.js.map